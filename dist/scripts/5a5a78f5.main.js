function initializeMap(){var a=new google.maps.LatLng(6.86252,79.95244);map=new google.maps.Map(document.getElementById("map-canvas"),{center:a,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP}),marker=createMarker(6.86252,79.95244),locationRef.on("value",function(a){var b=a.val();marker.animatedMoveTo(b.l);var c=marker.getPosition();map.setCenter(c)},function(a){console.log("The read failed: "+a.code)})}function createMarker(a,b){var c=new google.maps.Marker({position:new google.maps.LatLng(a,b),optimized:!0,map:map,icon:"/location/images/7d0bf849.cd-icon-location.png"});return c.setMap(map),c}function coordinatesAreEquivalent(a,b){return Math.abs(a-b)<1e-6}var map,marker,key,ref="https://gayan-loction.firebaseio.com/",rootRef=new Firebase(ref),locationRef=rootRef.child("firebase-hq");google.maps.Marker.prototype.animatedMoveTo=function(a){var b=a[0],c=a[1],d=this.getPosition().lat(),e=this.getPosition().lng();if(!coordinatesAreEquivalent(d,b)||!coordinatesAreEquivalent(e,c))var f=0,g=b-d,h=c-e,i=window.setInterval(function(){f+=.01;var a=d+f*g,b=e+f*h,c=new google.maps.LatLng(a,b);this.setPosition(c),f>=1&&window.clearInterval(i)}.bind(this),50)};